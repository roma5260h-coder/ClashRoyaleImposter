# üïµÔ∏è Telegram-–±–æ—Ç –¥–ª—è –∏–≥—Ä—ã "–®–ø–∏–æ–Ω"

–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–π Telegram-–±–æ—Ç –¥–ª—è –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç–æ–ª—å–Ω–æ–π –∏–≥—Ä—ã "–®–ø–∏–æ–Ω" —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –∫–∞—Ä—Ç –∏–∑ Clash Royale.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ë–æ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–≥—Ä–∞—Ç—å –≤ "–®–ø–∏–æ–Ω" –≤ –∫–æ–º–ø–∞–Ω–∏–∏ –¥—Ä—É–∑–µ–π —á–µ—Ä–µ–∑ Telegram:
- **1 –∏–≥—Ä–æ–∫** ‚Äî —à–ø–∏–æ–Ω (–Ω–µ –∑–Ω–∞–µ—Ç –∫–∞—Ä—Ç—É)
- **–û—Å—Ç–∞–ª—å–Ω—ã–µ** ‚Äî –æ–±—ã—á–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ (–∑–Ω–∞—é—Ç –∫–∞—Ä—Ç—É)

–ö–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ª–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –µ–≥–æ —Ä–æ–ª—å—é –∏ (–¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤) –∫–∞—Ä—Ç—É.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
pythonClashBot/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ settings.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ cards.json               # –ö–∞—Ä—Ç—ã Clash Royale (78 –∫–∞—Ä—Ç)
‚îú‚îÄ‚îÄ game/
‚îÇ   ‚îú‚îÄ‚îÄ models.py                # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (Player, Game, Role, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ game_manager.py          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–≤—ã–º–∏ —Å–µ—Å—Å–∏—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ role_distributor.py      # –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ card_loader.py           # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤—ã–±–æ—Ä –∫–∞—Ä—Ç
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ start_handler.py         # –ö–æ–º–∞–Ω–¥–∞ /start
‚îÇ   ‚îú‚îÄ‚îÄ game_mode_handler.py     # –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –∏–≥—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ game_handler.py          # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–≥—Ä—ã
‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îî‚îÄ‚îÄ inline_keyboards.py      # –ò–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îî‚îÄ‚îÄ game_storage.py          # –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ main.py                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îî‚îÄ‚îÄ .env.example                 # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞

```bash
# –°–∫–æ–ø–∏—Ä—É–π —Ñ–∞–π–ª –ø—Ä–∏–º–µ—Ä–∞
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π .env –∏ –≤—Å—Ç–∞–≤—å —Å–≤–æ–π Telegram Bot Token
# TELEGRAM_BOT_TOKEN=your_token_here
```

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python main.py
```

## üì± Flow –±–æ—Ç–∞

1. **`/start`** ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **"–ù–∞—á–∞—Ç—å –∏–≥—Ä—É"** ‚Äî –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –∏–≥—Ä—ã
3. **"–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º"** ‚Äî –≤—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–≥—Ä–æ–∫–æ–≤ (3‚Äì10)
4. **–í—ã–±–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä—ã, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π
5. **–õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** ‚Äî –∫–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:
   - –®–ø–∏–æ–Ω—É: "–¢—ã —à–ø–∏–æ–Ω!"
   - –û–±—ã—á–Ω—ã–º: –∫–∞—Ä—Ç–∞ + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
6. **–í —á–∞—Ç–µ** ‚Äî –æ–±—ä—è–≤–ª–µ–Ω–∏–µ, –∫—Ç–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –∏–≥—Ä—É

## üéÆ –†–µ–∂–∏–º—ã –∏–≥—Ä—ã

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º
- 1 —à–ø–∏–æ–Ω (–Ω–µ –∑–Ω–∞–µ—Ç –∫–∞—Ä—Ç—É)
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ (–∑–Ω–∞—é—Ç –∫–∞—Ä—Ç—É)

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ä–µ–∂–∏–º—ã!

## üó∫Ô∏è –ö–∞—Ä—Ç—ã (–õ–æ–∫–∞—Ü–∏–∏)

–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–≤—Å–µ –∫–∞—Ä—Ç—ã –∏–∑ Clash Royale** (78 –∫–∞—Ä—Ç):
- –í–∞—Ä–≤–∞—Ä—ã, –õ—É—á–Ω–∏–∫–∏, –ì–æ–±–ª–∏–Ω—ã, –ì–∏–≥–∞–Ω—Ç, –ì–æ–ª–µ–º...
- –ö–∞–∂–¥–∞—è –∫–∞—Ä—Ç–∞ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
- –ù–∞–∑–≤–∞–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

–§–∞–π–ª: `data/cards.json`

## üîß –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Ç–∞–∫, —á—Ç–æ–±—ã –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–µ–∂–∏–º–æ–≤
```python
# –í game/models.py
class GameMode(Enum):
    STANDARD = "standard"
    CUSTOM = "custom"      # –ù–æ–≤—ã–π —Ä–µ–∂–∏–º
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
```python
# –ò—Å–ø–æ–ª—å–∑—É–π AsyncIO –∏–ª–∏ APScheduler
# –õ–æ–≥–∏–∫–∞ —É–∂–µ –º–æ–¥—É–ª—å–Ω–∞ –¥–ª—è —Ç–∞–∫–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
```python
# –î–æ–±–∞–≤—å –Ω–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ handlers/
# –ò—Å–ø–æ–ª—å–∑—É–π game_manager –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–∞—Ä—Ç
```python
# –ü—Ä–æ—Å—Ç–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π data/cards.json
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç –Ω–æ–≤—ã–µ –∫–∞—Ä—Ç—ã
```

## üìä –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### Player
```python
player_id: int              # –ù–æ–º–µ—Ä –≤ –∏–≥—Ä–µ (1, 2, 3...)
telegram_id: int           # Telegram ID
role: Role                 # SPY –∏–ª–∏ CITIZEN
username: Optional[str]    # –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### Game
```python
game_id: int              # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
chat_id: int              # ID —á–∞—Ç–∞ Telegram
creator_id: int           # Telegram ID —Å–æ–∑–¥–∞—Ç–µ–ª—è
mode: GameMode            # –†–µ–∂–∏–º –∏–≥—Ä—ã
players: List[Player]     # –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤
card: Optional[Card]      # –í—ã–±—Ä–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞
status: str               # waiting, role_assigned, started, finished
```

### Card
```python
id: str                   # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∫–∞—Ä—Ç—ã
name_ru: str             # –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
image_url: str           # URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```

## üí° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–≥—Ä–∞

1. –°–æ–∑–¥–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É"
2. –í—ã–±–∏—Ä–∞–µ—Ç —Ä–µ–∂–∏–º (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)
3. –í—ã–±–∏—Ä–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤
4. –ë–æ—Ç —Å–æ–∑–¥–∞—ë—Ç –∏–≥—Ä—É —Å N –∏–≥—Ä–æ–∫–∞–º–∏:
   - –°–ª—É—á–∞–π–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç 1 —à–ø–∏–æ–Ω–∞
   - –û—Å—Ç–∞–ª—å–Ω—ã–µ ‚Äî –æ–±—ã—á–Ω—ã–µ –∏–≥—Ä–æ–∫–∏
   - –°–ª—É—á–∞–π–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞—Ä—Ç—É
5. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É –ª–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
   - –®–ø–∏–æ–Ω—É: "–¢—ã —à–ø–∏–æ–Ω!"
   - –û–±—ã—á–Ω—ã–º: "–ö–∞—Ä—Ç–∞: [–Ω–∞–∑–≤–∞–Ω–∏–µ]" + —Ñ–æ—Ç–æ
6. –í —á–∞—Ç–µ –æ–±—ä—è–≤–ª—è–µ—Ç—Å—è: "–ò–≥—Ä—É –Ω–∞—á–∏–Ω–∞–µ—Ç: –ò–≥—Ä–æ–∫ X"

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ö–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É ‚Äî –ª–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –®–ø–∏–æ–Ω –Ω–µ –≤–∏–¥–∏—Ç –∫–∞—Ä—Ç—É
- –¢–æ–∫–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ .env (–Ω–µ –≤ –∫–æ–¥–µ)

## üìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í–µ—Å—å –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- Docstring –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –∏ –∫–ª–∞—Å—Å–æ–≤
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–µ
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Python 3.8+**
- **python-telegram-bot 21.8** ‚Äî –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram API
- **python-dotenv** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **JSON** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

Telegram Bot Developer

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å —Å–≤–æ–π —Ç–æ–∫–µ–Ω –∏ –∑–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞!** ü§ñ
